<ul class="p-0 m-0">
{% for crypto in marketData %}
<li class="d-flex mb-4 pb-1 align-items-center">
    <div class="avatar flex-shrink-0 me-3">
    <img src="{{ crypto.image }}" alt="{{ crypto.name }} logo">
    </div>
    <div class="d-flex w-100 flex-wrap align-items-center justify-content-between gap-2">
    <div class="me-2">
        <h6 class="mb-0"
        data-bs-toggle="tooltip"
        data-bs-offset="0,4"
        data-bs-placement="right"
        data-bs-html="true"
        title="<span>Coin</span>"
        >{{ crypto.name }}</h6>
        <small class="text-muted" data-bs-toggle="tooltip"
        data-bs-offset="0,4"
        data-bs-placement="right"
        data-bs-html="true"
        title="<span>Current Price</span>"
        >
        â‚¬ {{ crypto.current_price|number_format(2, '.', ',') }}
        </small>
    </div>
    <div class="d-flex gap-2">
        <div class="user-progress">
            <small class="fw-semibold" data-bs-toggle="tooltip"
            data-bs-offset="0,4"
            data-bs-placement="right"
            data-bs-html="true"
            title="<span>My balance</span>"
            >0 {{ crypto.symbol|upper }}</small> 
            <p  class="{{ crypto.price_change_percentage_24h < 0 ? 'text-danger' : 'text-success' }}"
            data-bs-toggle="tooltip"
            data-bs-offset="0,4"
            data-bs-placement="right"
            data-bs-html="true"
            title="<span>Price change percentage 24h</span>"><small>
            {{ crypto.price_change_percentage_24h|number_format(2) }}%
            </small>
            </p>
        </div>
        <div id="sparkline-{{ crypto.id }}" class="sparkline">
    </div>
    </div>
</li>
<hr>
{% endfor %}
</ul>
<style>
    .crypto-table {
        margin: auto;
        width: 90%;
    }
    .crypto-table th, .crypto-table td {
        text-align: center;
    }
    .crypto-table img {
        width: 50px;
        height: 50px;
    }
        .sparkline {
        width: 100px;
        height: 55px;
    }
</style>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        {% for crypto in marketData %}
            Highcharts.chart('sparkline-{{ crypto.id }}', {
                chart: {
                    type: 'line',
                    backgroundColor: null,
                    borderWidth: 0,
                    margin: [4, 4, 4, 4],
                    height: 60,
                    style: {
                        overflow: 'hidden'
                    },
                    skipClone: true
                },
                title: {
                    text: ''
                },
                credits: {
                    enabled: false
                },
                xAxis: {
                    labels: {
                        enabled: false
                    },
                    title: {
                        text: null
                    },
                    startOnTick: false,
                    endOnTick: false,
                    tickPositions: []
                },
                yAxis: {
                    endOnTick: false,
                    startOnTick: false,
                    labels: {
                        enabled: false
                    },
                    title: {
                        text: null
                    },
                    tickPositions: [0]
                },
                legend: {
                    enabled: false
                },
                tooltip: {
                    backgroundColor: 'none',
                    borderWidth: 0,
                    shadow: false,
                    useHTML: true,
                    hideDelay: 0,
                    shared: true,
                    padding: 0,
                   
                },
                series: [{
                    data: {{ crypto.sparkline_in_7d.price|json_encode|raw }},
                    lineColor: '{{ crypto.price_change_percentage_24h < 0 ? "red" : "green" }}',
                    color: '{{ crypto.price_change_percentage_24h < 0 ? "red" : "green" }}',
                    fillOpacity: 0.1,
                    marker: {
                        enabled: false
                    },
                    threshold: null
                }]
            });
        {% endfor %}
    });
</script>